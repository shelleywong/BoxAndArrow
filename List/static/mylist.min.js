var av,l,head,statusElement=document.getElementById("status"),progressElement=document.getElementById("progress"),spinnerElement=document.getElementById("spinner"),Module={preRun:[],postRun:[],print:function(){var t=document.getElementById("output");return t&&(t.value=""),function(e){1<arguments.length&&(e=Array.prototype.slice.call(arguments).join(" ")),console.log(e),t&&(t.value+=e+"\n",t.scrollTop=t.scrollHeight)}}(),printErr:function(e){1<arguments.length&&(e=Array.prototype.slice.call(arguments).join(" ")),console.error(e)},canvas:function(){var e=document.getElementById("canvas");return e.addEventListener("webglcontextlost",function(e){alert("WebGL context lost. You will need to reload the page."),e.preventDefault()},!1),e}(),setStatus:function(e){var t,a;Module.setStatus.last||(Module.setStatus.last={time:Date.now(),text:""}),e!==Module.setStatus.last.text&&(t=e.match(/([^(]+)\((\d+(\.\d+)?)\/(\d+)\)/),a=Date.now(),t&&a-Module.setStatus.last.time<30||(Module.setStatus.last.time=a,Module.setStatus.last.text=e,t?(e=t[1],progressElement.value=100*parseInt(t[2]),progressElement.max=100*parseInt(t[4]),progressElement.hidden=!1,spinnerElement.hidden=!1):(progressElement.value=null,progressElement.max=null,progressElement.hidden=!0,e||(spinnerElement.hidden=!0)),statusElement.innerHTML=e))},totalDependencies:0,monitorRunDependencies:function(e){this.totalDependencies=Math.max(this.totalDependencies,e),Module.setStatus(e?"Preparing... ("+(this.totalDependencies-e)+"/"+this.totalDependencies+")":"All downloads complete.")}};function insertHead(e,t){av.umsg("Testing List::insert() at head for value: "+t),av.step(),e.insert(t),l.addFirst(t),1==l.size()?(av.step(),av.umsg("head pointer points to first element in the list"),head=av.pointer("head",l.get(0))):head.target(l.get(0)),l.layout(),av.step()}function insertEnd(e,t){av.umsg("Testing List::insert_at_end() for value "+t),av.step(),e.insert_at_end(t)?(av.umsg("Insert "+t+" at the end of the list"),-1==(e=e.length()-1)?(av.step(),av.umsg(t+" should've been inserted into the list, but something went wrong. Check that you are handling insertion when the list is empty.")):e!=l.size()?(av.step(),av.umsg("Something went wrong: we are unable to insert "+t+" into the list. You may have tried to access memory that you do not have access to.")):(l.add(e,t),1==l.size()&&(av.step(),av.umsg("head pointer points to first element in the list"),head=av.pointer("head",l.get(0))),l.layout())):av.umsg(t+" is already in the list"),av.step()}function findLength(e){av.umsg("Testing List::length()"),av.step();var a=e.length();if(0==a)av.umsg("The list is empty");else{for(let t=0;t<a;t++){if(void 0===l.get(t)){av.umsg("Your length() function produced an unexpected result. It may have tried to access memory that it does not have access to, or it may have just returned the wrong value. Return value: "+a),av.step();break}{let e=l.get(t);e.highlight(),av.umsg("Count = "+(t+1)),av.step(),e.unhighlight()}}a==l.size()?av.umsg("The length of the linked list is "+a):av.umsg("Something's not right. The length of the linked list should be "+l.size()+", but you returned "+a)}}function printList(e){av.umsg("Testing List::print()"),av.step();var t=e.print();0==e.length()?av.umsg("Your linked list was empty, so nothing printed."):av.umsg("Your current linked list: "+t)}function lookupVal(e,a){av.umsg("Testing List::lookup() for value "+a);var n=e.lookup(a);if(av.step(),-1==n)av.umsg(a+" is not in the list."),av.step();else if(n<0||n>l.size())av.umsg("Your lookup() function produced an unexpected result. It returned "+n+" which is not a location within the linked list of "+l.size()+" nodes"),av.step();else{let t=0;for(;t!=n;){let e=l.get(t);e.highlight(),av.umsg("target not found at list node "+t),av.step(),e.unhighlight(),t++}let e=l.get(n);void 0===e?av.umsg("Your lookup() function produced an unexpected result. It may have tried to access memory that it does not have access to, or it may have just returned the wrong value. Return value: "+n):(av.umsg("target "+a+" found at node "+n),e.css({"background-color":"rgb(140, 35, 50)",color:"white"}),av.step(),e.css({"background-color":"white",color:"black"}),l.layout()),av.step()}}function removeVal(n,s){av.umsg("Testing List::remove() for value "+s);var o=n.remove(s);if(av.step(),-1==o)av.umsg(s+" is not in the list and cannot be removed."),av.step();else if(0<=o&&o<l.size()){let t=0;for(;t!=o;){let e=l.get(t);e.highlight(),av.umsg("target not found at node "+t+" in the list"),av.step(),e.unhighlight(),t++}let e=l.get(o);e.highlight(),av.umsg("target "+s+" was found"),av.step();let a=l.remove(o);av.umsg(a.value()+" was removed"),0==o&&(0<n.length()?(head.target(l.get(0)),av.step(),av.umsg("head pointer now points to "+l.get(0).value())):(av.step(),av.umsg("List is now empty"))),l.layout();var i=n.print().split(" ");console.log("curCPP: "+i[0]);for(let t=0;t<l.size();t++){let e=l.get(t);if(e.value()!=parseInt(i[t])){av.umsg("Something went wrong. Your list does not match the expected results modeled in the visualization."),av.step();break}}}else av.umsg("Your remove() function produced an unexpected result. It may have tried to access memory that it does not have access to, or it may have just returned the wrong value. Return value: "+o),av.step()}function removeHead(a){av.umsg("Testing List::remove_head()");var e=a.remove_head();if(av.step(),0==e)av.umsg("List was empty so there was nothing to be removed"),av.step();else{let t=l.get(0);if(void 0===t)av.umsg("Your remove_head() function produced an unexpected result. You may have tried to remove a value from an empty list"),av.step();else{t.highlight(),av.umsg("Removing "+t.value()+" from list head"),av.step();let e=l.remove(0);av.umsg(e.value()+" was removed"),0<a.length()?(head.target(l.get(0)),av.step(),av.umsg("head pointer now points to "+l.get(0).value())):(av.step(),av.umsg("List is now empty")),l.layout()}}}function callCommand(t,a,n,s){for(let e=0;e<s;e++){var o=a[e];if(Number.isInteger(o)){switch(n){case"insert":insertHead(t,o);break;case"insert_at_end":insertEnd(t,o);break;case"length":findLength(t);break;case"print":printList(t);break;case"lookup":lookupVal(t,o);break;case"remove":removeVal(t,o);break;case"remove_head":removeHead(t);break;default:av.umsg("Invalid Command")}console.log("Current list: "+t.print())}else av.umsg("The value "+o+" is invalid")}}function createAndCall(e,t,a,n){var s=document.getElementById(t).innerHTML;let o=document.getElementById(a).innerHTML;t=o.split(",").map(Number),a=t.length;av.umsg("Command #"+n+": "+s),callCommand(e,t,s,a),av.step()}Module.setStatus("Downloading..."),window.onerror=function(){Module.setStatus("Exception thrown, see JavaScript console"),spinnerElement.style.display="none",Module.setStatus=function(e){e&&Module.printErr("[post-exception status] "+e)}},av=new JSAV("container"),document.querySelector(".restart").addEventListener("click",function(){location.replace("list")}),document.querySelector(".startlist").addEventListener("click",function(){$(this).prop("disabled",!0),l=av.ds.list();var e=new Module.List;av.umsg("We'll run the visualization using your list commands"),av.step(),av.displayInit(),createAndCall(e,"name1","array1vals",1),createAndCall(e,"name2","array2vals",2),createAndCall(e,"name3","array3vals",3),av.umsg("Did your linked list work as expected?"),av.step(),e.delete(),av.recorded()});